@model TicTacToe.Models.LoadGameViewModel

@{
    ViewBag.Title = "Load";
}

<h2>Load</h2>


<form id="loadGameForm">

    @Html.AntiForgeryToken()

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                @Html.LabelFor(model => model.Player1.Name, htmlAttributes: new { @class = "control-label" })
                @Html.EditorFor(model => model.Player1.Name, new { htmlAttributes = new { @class = "form-control", @placeholder = "Enter Player 1 Name", @required = "required" } })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Player2.Name, htmlAttributes: new { @class = "control-label" })
                @Html.EditorFor(model => model.Player2.Name, new { htmlAttributes = new { @class = "form-control", @placeholder = "Enter Player 2 Name", @required = "required" } })
            </div>

                        

            <div class="form-group">
                <a href="/" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">Play</button>
            </div>
        </div>
    </div>
</form>




@section scripts
{
    @Scripts.Render("~/bundles/jqueryval")

    <script>

       


        $("#loadGameForm").validate({

            submitHandler: function () {

                $.ajax({
                    url: "/Home/LoadGame",
                    method: "POST",
                    dataType: "json",
                    data: $("#loadGameForm").serialize(),
                    success: function (data) {

                        if (data.resultCode == 1) {

                            toastr.success(data.data);

                            setTimeout(function () {

                                window.location.href = "/Home/Play/" + data.player1Id + "/" + data.player2Id + "/" + data.gameId;

                            }, 2000);

                        }
                        else {

                            toastr.error(data.data);
                        }
                    },
                    failure: function () {
                        console.log("fail");
                    }

                });

                return false;
            }
        });

    </script>
}


